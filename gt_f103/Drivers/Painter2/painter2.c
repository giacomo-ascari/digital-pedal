/*
 * painter2.c
 *
 *  Created on: May 18, 2022
 *      Author: asky
 */

#include "painter2.h"

uint8_t font_8_12[768] = { 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x18, 0x70, 0x0, 0x0, 0xc, 0x30, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3c, 0x0, 0x3c, 0x18, 0x0, 0x18, 0x18, 0x7c, 0x3c, 0x7c, 0x7e, 0x7e, 0x3c, 0x66, 0x3c, 0x6, 0x66, 0x60, 0x63, 0x63, 0x3c, 0x7c, 0x3c, 0x7c, 0x3c, 0x7e, 0x66, 0x66, 0x63, 0x66, 0x66, 0x7e, 0x3c, 0xc, 0x3c, 0x3c, 0x30, 0x7e, 0x1c, 0x7e, 0x3c, 0x3c, 0x0, 0x18, 0x66, 0x66, 0x18, 0xd8, 0x38, 0x18, 0x18, 0x18, 0x0, 0x0, 0x0, 0x0, 0x0, 0x6, 0x0, 0x0, 0x6, 0x0, 0x60, 0x3c, 0x30, 0x60, 0xc, 0x3c, 0x0, 0x1c, 0x3c, 0x66, 0x66, 0x66, 0x60, 0x60, 0x66, 0x66, 0x18, 0x6, 0x66, 0x60, 0x63, 0x63, 0x66, 0x66, 0x66, 0x66, 0x66, 0x18, 0x66, 0x66, 0x63, 0x66, 0x66, 0x6, 0x66, 0x1c, 0x66, 0x66, 0x36, 0x60, 0x38, 0x6, 0x66, 0x66, 0x0, 0x3c, 0x66, 0x66, 0x3c, 0xda, 0x6c, 0x18, 0x18, 0x18, 0x0, 0x0, 0x0, 0x0, 0x0, 0x6, 0x0, 0x0, 0xc, 0x0, 0x30, 0x66, 0x30, 0x60, 0xc, 0x66, 0x0, 0x1e, 0x66, 0x66, 0x66, 0x66, 0x60, 0x60, 0x66, 0x66, 0x18, 0x6, 0x6c, 0x60, 0x77, 0x73, 0x66, 0x66, 0x66, 0x66, 0x60, 0x18, 0x66, 0x66, 0x63, 0x34, 0x66, 0x6, 0x6e, 0x7c, 0x66, 0x66, 0x36, 0x60, 0x30, 0xc, 0x66, 0x66, 0x0, 0x3c, 0x66, 0xff, 0x66, 0x76, 0x6c, 0x18, 0x30, 0xc, 0x36, 0x18, 0x0, 0x0, 0x0, 0xc, 0x38, 0x38, 0x18, 0x0, 0x18, 0x66, 0x30, 0x30, 0xc, 0x0, 0x0, 0x1f, 0x66, 0x66, 0x60, 0x66, 0x60, 0x60, 0x60, 0x66, 0x18, 0x6, 0x6c, 0x60, 0x7f, 0x7b, 0x66, 0x66, 0x66, 0x66, 0x30, 0x18, 0x66, 0x66, 0x63, 0x18, 0x66, 0xc, 0x6e, 0xc, 0x6, 0x6, 0x36, 0x60, 0x7c, 0xc, 0x76, 0x66, 0x0, 0x3c, 0x0, 0x66, 0x60, 0xc, 0x38, 0x0, 0x30, 0xc, 0x1c, 0x18, 0x0, 0x0, 0x0, 0xc, 0x38, 0x38, 0x30, 0x7e, 0xc, 0xe, 0x30, 0x30, 0xc, 0x0, 0x0, 0x1b, 0x66, 0x7c, 0x60, 0x66, 0x78, 0x78, 0x60, 0x7e, 0x18, 0x6, 0x78, 0x60, 0x6b, 0x6f, 0x66, 0x7c, 0x66, 0x7c, 0x18, 0x18, 0x66, 0x66, 0x6b, 0x18, 0x3c, 0x18, 0x66, 0xc, 0xc, 0x1c, 0x36, 0x3c, 0x66, 0x18, 0x3c, 0x66, 0x0, 0x18, 0x0, 0x66, 0x38, 0x18, 0x60, 0x0, 0x30, 0xc, 0x7f, 0x7e, 0x0, 0x7e, 0x0, 0x18, 0x0, 0x0, 0x60, 0x0, 0x6, 0x18, 0x30, 0x18, 0xc, 0x0, 0x0, 0x1b, 0x7e, 0x66, 0x60, 0x66, 0x60, 0x60, 0x6e, 0x66, 0x18, 0x6, 0x6c, 0x60, 0x6b, 0x67, 0x66, 0x60, 0x66, 0x6c, 0xc, 0x18, 0x66, 0x66, 0x6b, 0x2c, 0x18, 0x30, 0x76, 0xc, 0x18, 0x6, 0x66, 0x6, 0x66, 0x18, 0x6e, 0x3e, 0x0, 0x18, 0x0, 0x66, 0x1c, 0x30, 0x6f, 0x0, 0x30, 0xc, 0x1c, 0x18, 0x0, 0x0, 0x0, 0x18, 0x0, 0x0, 0x30, 0x7e, 0xc, 0x18, 0x30, 0x18, 0xc, 0x0, 0x0, 0x1a, 0x66, 0x66, 0x66, 0x66, 0x60, 0x60, 0x66, 0x66, 0x18, 0x66, 0x6c, 0x60, 0x63, 0x63, 0x66, 0x60, 0x66, 0x66, 0x6, 0x18, 0x66, 0x66, 0x3e, 0x66, 0x18, 0x60, 0x76, 0xc, 0x30, 0x66, 0x7f, 0x6, 0x66, 0x30, 0x66, 0xc, 0x0, 0x0, 0x0, 0xff, 0x6, 0x6e, 0x66, 0x0, 0x30, 0xc, 0x36, 0x18, 0x0, 0x0, 0x0, 0x30, 0x0, 0x0, 0x18, 0x0, 0x18, 0x0, 0x30, 0xc, 0xc, 0x0, 0x0, 0x18, 0x66, 0x66, 0x66, 0x66, 0x60, 0x60, 0x66, 0x66, 0x18, 0x66, 0x66, 0x60, 0x63, 0x63, 0x66, 0x60, 0x66, 0x66, 0x66, 0x18, 0x66, 0x3c, 0x36, 0x66, 0x18, 0x60, 0x66, 0xc, 0x60, 0x66, 0x6, 0x6, 0x66, 0x30, 0x66, 0x1c, 0x0, 0x18, 0x0, 0x66, 0x66, 0x5b, 0x66, 0x0, 0x18, 0x18, 0x0, 0x0, 0x38, 0x0, 0x38, 0x30, 0x38, 0x38, 0xc, 0x0, 0x30, 0x18, 0x30, 0xc, 0xc, 0x0, 0x0, 0x78, 0x66, 0x7c, 0x3c, 0x7c, 0x7e, 0x60, 0x3c, 0x66, 0x3c, 0x3c, 0x66, 0x7e, 0x63, 0x63, 0x3c, 0x60, 0x3c, 0x66, 0x3c, 0x18, 0x3c, 0x18, 0x36, 0x66, 0x18, 0x7e, 0x3c, 0x1e, 0x7e, 0x3c, 0x6, 0x7c, 0x3c, 0x30, 0x3c, 0x38, 0x0, 0x18, 0x0, 0x66, 0x3c, 0x1b, 0x3b, 0x0, 0x18, 0x18, 0x0, 0x0, 0x38, 0x0, 0x38, 0x60, 0x38, 0x38, 0x6, 0x0, 0x60, 0x18, 0x30, 0x6, 0xc, 0x0, 0x0, 0xf8, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x18, 0xe, 0x0, 0x0, 0xc, 0x30, 0x0, 0x0, 0x18, 0x0, 0x0, 0x60, 0x0, 0x18, 0x0, 0x0, 0x0, 0x0, 0x3c, 0x6, 0x3c, 0x0, 0xff, 0xf8, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x6, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x18, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x30, 0x0, 0x0, 0x0, 0x0, 0x30, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x70, };

void Painter_TogglePixel(uint8_t *image, uint16_t *x, uint16_t *y, enum Origin origin) {
	uint16_t i;
	uint16_t _x, _y;

	if (origin == TOP_LEFT) {
		_x = *x;
		_y = *y;
	} else if (origin == TOP_RIGHT) {
		_x = CANVAS_WIDTH - *x;
		_y = *y;
	} else if (origin == BOT_LEFT) {
		_x = *y;
		_y = CANVAS_HEIGHT - *x;
	} else if (origin == BOT_RIGHT) {
		_x = CANVAS_WIDTH - *y;
		_y = CANVAS_HEIGHT - *x;
	}

	if (_x < CANVAS_WIDTH && _y < CANVAS_HEIGHT) {
		// normalized to be top_left
		i = (_x +  _y * CANVAS_WIDTH) / RESOLUTION;
		image[i] ^= (0x01 << ((RESOLUTION - 1) - _x % RESOLUTION));
	}
}

void Painter_ToggleRectangle(uint8_t *image, uint16_t x1, uint16_t y1, uint16_t x2, uint16_t y2, enum Origin origin) {
	for (uint16_t x = x1; x < x2; x++) {
		for (uint16_t y = y1; y < y2; y++) {
			Painter_TogglePixel(image, &x, &y, origin);
		}
	}
}


uint16_t map[256];
uint8_t map_init = 0;

uint16_t Translate(char c) {
	if (!map_init) {
		map[32] = 36;

		map_init = 1;
	}

	return map[c];
}


void Painter_Clean(uint8_t *image) {
	uint16_t bytes = CANVAS_WIDTH * CANVAS_HEIGHT / RESOLUTION;
	for (uint16_t i = 0; i < bytes; i++) image[i] = 0xFF;
}
