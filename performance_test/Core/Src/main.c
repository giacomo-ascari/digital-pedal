/* USER CODE BEGIN Header */
/**
  ******************************************************************************
  * @file           : main.c
  * @brief          : Main program body
  ******************************************************************************
  * @attention
  *
  * Copyright (c) 2023 STMicroelectronics.
  * All rights reserved.
  *
  * This software is licensed under terms that can be found in the LICENSE file
  * in the root directory of this software component.
  * If no LICENSE file comes with this software, it is provided AS-IS.
  *
  ******************************************************************************
  */
/* USER CODE END Header */
/* Includes ------------------------------------------------------------------*/
#include "main.h"

/* Private includes ----------------------------------------------------------*/
/* USER CODE BEGIN Includes */

#include "arm_math.h"

/* USER CODE END Includes */

/* Private typedef -----------------------------------------------------------*/
/* USER CODE BEGIN PTD */

/* USER CODE END PTD */

/* Private define ------------------------------------------------------------*/
/* USER CODE BEGIN PD */

#define TEST_SETS 10
#define TEST_REPETITIONS 1000000

/* USER CODE END PD */

/* Private macro -------------------------------------------------------------*/
/* USER CODE BEGIN PM */

/* USER CODE END PM */

/* Private variables ---------------------------------------------------------*/

/* USER CODE BEGIN PV */

uint32_t start_time [TEST_SETS];
uint32_t end_time [TEST_SETS];
uint32_t elapsed [TEST_SETS];
volatile float a = 0.324;
volatile float b = 5.7001;
float c;


/* USER CODE END PV */

/* Private function prototypes -----------------------------------------------*/
void SystemClock_Config(void);
static void MX_GPIO_Init(void);
/* USER CODE BEGIN PFP */

/* USER CODE END PFP */

/* Private user code ---------------------------------------------------------*/
/* USER CODE BEGIN 0 */

//https://www.researchgate.net/publication/3049422_Improving_Accuracy_in_Mitchell%27s_Logarithmic_Multiplication_Using_Operand_Decomposition#pf4


/*
 * Hello there.
 * This thing should be similar to Feynman's algorithm.
 * The main difference is that I use base 10 (or 100) to compute the result,
 * as bitwise operations are not possible (nor advantageous) on float numbers.
 *
 * Rewriting such functions is not fun, not even a bit. But I need to get
 * computing times, at the obvious expense of precision and memory.
 *
 * Logarithmic functions cannot be put simply into a table, as the domain
 * isn't constrained.
 *
 * Quick explanation my approach (on base 10):
 *  #1 as we know y = log_10(x) (y as the returned value)
 *  #2 y = log_10(x/divider * divider)
 *  #3 y = log_10(x/divider) + log_10(divider)
 *  #4 if we assume that the divider is greater or equal than x, then
 *     the possible arguments for 'log_10(x/divider)' are only between 0 and 1;
 *     this allows us to create a proper lookup table
 *  #5 if we assume that the divider is a power of 10, then we can avoid to
 *     calculate 'log_10(divider)', as it is equal to the exponent
 *  #6 the only problem is finding the divider, and that is achieved
 *     by starting from 1 and multiplying by 10 until it's bigger than x;
 *     note that we are keeping track of the exponent on a second variable
 *  #7 by calculating x / divider * samples_in_the_tables we find the index
 *     of the table's item
 *  #8 now we can just sum the table's item with the exponent and return y
 *
 *  Base 100 is used to reduce the number of iterations (which seem to be
 *  time consuming) at the cost of additional precision.
 */

//https://www.programiz.com/python-programming/online-compiler/
/*
import math
lower, upper, samples = 0, 1, 1000
m = "const float log_table_10[" + str(samples) + "] = { "
for i in range(0+1, samples+1):
    x = i / samples * (upper - lower)
    m += str(round(math.log(x, 10), 6)) + ', '
m = m[0:len(m)-2]
m += "};"
print(m)
 */

const float log_table_10[1000] = { -3.0, -2.69897, -2.522879, -2.39794, -2.30103, -2.221849, -2.154902, -2.09691, -2.045757, -2.0, -1.958607, -1.920819, -1.886057, -1.853872, -1.823909, -1.79588, -1.769551, -1.744727, -1.721246, -1.69897, -1.677781, -1.657577, -1.638272, -1.619789, -1.60206, -1.585027, -1.568636, -1.552842, -1.537602, -1.522879, -1.508638, -1.49485, -1.481486, -1.468521, -1.455932, -1.443697, -1.431798, -1.420216, -1.408935, -1.39794, -1.387216, -1.376751, -1.366532, -1.356547, -1.346787, -1.337242, -1.327902, -1.318759, -1.309804, -1.30103, -1.29243, -1.283997, -1.275724, -1.267606, -1.259637, -1.251812, -1.244125, -1.236572, -1.229148, -1.221849, -1.21467, -1.207608, -1.200659, -1.19382, -1.187087, -1.180456, -1.173925, -1.167491, -1.161151, -1.154902, -1.148742, -1.142668, -1.136677, -1.130768, -1.124939, -1.119186, -1.113509, -1.107905, -1.102373, -1.09691, -1.091515, -1.086186, -1.080922, -1.075721, -1.070581, -1.065502, -1.060481, -1.055517, -1.05061, -1.045757, -1.040959, -1.036212, -1.031517, -1.026872, -1.022276, -1.017729, -1.013228, -1.008774, -1.004365, -1.0, -0.995679, -0.9914, -0.987163, -0.982967, -0.978811, -0.974694, -0.970616, -0.966576, -0.962574, -0.958607, -0.954677, -0.950782, -0.946922, -0.943095, -0.939302, -0.935542, -0.931814, -0.928118, -0.924453, -0.920819, -0.917215, -0.91364, -0.910095, -0.906578, -0.90309, -0.899629, -0.896196, -0.89279, -0.88941, -0.886057, -0.882729, -0.879426, -0.876148, -0.872895, -0.869666, -0.866461, -0.863279, -0.860121, -0.856985, -0.853872, -0.850781, -0.847712, -0.844664, -0.841638, -0.838632, -0.835647, -0.832683, -0.829738, -0.826814, -0.823909, -0.821023, -0.818156, -0.815309, -0.812479, -0.809668, -0.806875, -0.8041, -0.801343, -0.798603, -0.79588, -0.793174, -0.790485, -0.787812, -0.785156, -0.782516, -0.779892, -0.777284, -0.774691, -0.772113, -0.769551, -0.767004, -0.764472, -0.761954, -0.759451, -0.756962, -0.754487, -0.752027, -0.74958, -0.747147, -0.744727, -0.742321, -0.739929, -0.737549, -0.735182, -0.732828, -0.730487, -0.728158, -0.725842, -0.723538, -0.721246, -0.718967, -0.716699, -0.714443, -0.712198, -0.709965, -0.707744, -0.705534, -0.703335, -0.701147, -0.69897, -0.696804, -0.694649, -0.692504, -0.69037, -0.688246, -0.686133, -0.68403, -0.681937, -0.679854, -0.677781, -0.675718, -0.673664, -0.67162, -0.669586, -0.667562, -0.665546, -0.66354, -0.661544, -0.659556, -0.657577, -0.655608, -0.653647, -0.651695, -0.649752, -0.647817, -0.645892, -0.643974, -0.642065, -0.640165, -0.638272, -0.636388, -0.634512, -0.632644, -0.630784, -0.628932, -0.627088, -0.625252, -0.623423, -0.621602, -0.619789, -0.617983, -0.616185, -0.614394, -0.61261, -0.610834, -0.609065, -0.607303, -0.605548, -0.603801, -0.60206, -0.600326, -0.598599, -0.596879, -0.595166, -0.59346, -0.59176, -0.590067, -0.58838, -0.5867, -0.585027, -0.583359, -0.581699, -0.580044, -0.578396, -0.576754, -0.575118, -0.573489, -0.571865, -0.570248, -0.568636, -0.567031, -0.565431, -0.563837, -0.562249, -0.560667, -0.559091, -0.55752, -0.555955, -0.554396, -0.552842, -0.551294, -0.549751, -0.548214, -0.546682, -0.545155, -0.543634, -0.542118, -0.540608, -0.539102, -0.537602, -0.536107, -0.534617, -0.533132, -0.531653, -0.530178, -0.528708, -0.527244, -0.525784, -0.524329, -0.522879, -0.521434, -0.519993, -0.518557, -0.517126, -0.5157, -0.514279, -0.512862, -0.511449, -0.510042, -0.508638, -0.50724, -0.505845, -0.504456, -0.50307, -0.501689, -0.500313, -0.498941, -0.497573, -0.496209, -0.49485, -0.493495, -0.492144, -0.490797, -0.489455, -0.488117, -0.486782, -0.485452, -0.484126, -0.482804, -0.481486, -0.480172, -0.478862, -0.477556, -0.476254, -0.474955, -0.473661, -0.47237, -0.471083, -0.4698, -0.468521, -0.467246, -0.465974, -0.464706, -0.463442, -0.462181, -0.460924, -0.459671, -0.458421, -0.457175, -0.455932, -0.454693, -0.453457, -0.452225, -0.450997, -0.449772, -0.44855, -0.447332, -0.446117, -0.444906, -0.443697, -0.442493, -0.441291, -0.440093, -0.438899, -0.437707, -0.436519, -0.435334, -0.434152, -0.432974, -0.431798, -0.430626, -0.429457, -0.428291, -0.427128, -0.425969, -0.424812, -0.423659, -0.422508, -0.421361, -0.420216, -0.419075, -0.417937, -0.416801, -0.415669, -0.414539, -0.413413, -0.412289, -0.411168, -0.41005, -0.408935, -0.407823, -0.406714, -0.405607, -0.404504, -0.403403, -0.402305, -0.401209, -0.400117, -0.399027, -0.39794, -0.396856, -0.395774, -0.394695, -0.393619, -0.392545, -0.391474, -0.390406, -0.38934, -0.388277, -0.387216, -0.386158, -0.385103, -0.38405, -0.383, -0.381952, -0.380907, -0.379864, -0.378824, -0.377786, -0.376751, -0.375718, -0.374688, -0.37366, -0.372634, -0.371611, -0.37059, -0.369572, -0.368556, -0.367543, -0.366532, -0.365523, -0.364516, -0.363512, -0.36251, -0.361511, -0.360514, -0.359519, -0.358526, -0.357535, -0.356547, -0.355561, -0.354578, -0.353596, -0.352617, -0.35164, -0.350665, -0.349692, -0.348722, -0.347754, -0.346787, -0.345823, -0.344862, -0.343902, -0.342944, -0.341989, -0.341035, -0.340084, -0.339135, -0.338187, -0.337242, -0.336299, -0.335358, -0.334419, -0.333482, -0.332547, -0.331614, -0.330683, -0.329754, -0.328827, -0.327902, -0.326979, -0.326058, -0.325139, -0.324222, -0.323306, -0.322393, -0.321482, -0.320572, -0.319664, -0.318759, -0.317855, -0.316953, -0.316053, -0.315155, -0.314258, -0.313364, -0.312471, -0.31158, -0.310691, -0.309804, -0.308919, -0.308035, -0.307153, -0.306273, -0.305395, -0.304518, -0.303644, -0.302771, -0.301899, -0.30103, -0.300162, -0.299296, -0.298432, -0.297569, -0.296709, -0.295849, -0.294992, -0.294136, -0.293282, -0.29243, -0.291579, -0.29073, -0.289883, -0.289037, -0.288193, -0.28735, -0.286509, -0.28567, -0.284833, -0.283997, -0.283162, -0.282329, -0.281498, -0.280669, -0.279841, -0.279014, -0.278189, -0.277366, -0.276544, -0.275724, -0.274905, -0.274088, -0.273273, -0.272459, -0.271646, -0.270835, -0.270026, -0.269218, -0.268411, -0.267606, -0.266803, -0.266001, -0.2652, -0.264401, -0.263603, -0.262807, -0.262013, -0.261219, -0.260428, -0.259637, -0.258848, -0.258061, -0.257275, -0.25649, -0.255707, -0.254925, -0.254145, -0.253366, -0.252588, -0.251812, -0.251037, -0.250264, -0.249492, -0.248721, -0.247952, -0.247184, -0.246417, -0.245652, -0.244888, -0.244125, -0.243364, -0.242604, -0.241845, -0.241088, -0.240332, -0.239578, -0.238824, -0.238072, -0.237321, -0.236572, -0.235824, -0.235077, -0.234331, -0.233587, -0.232844, -0.232102, -0.231362, -0.230623, -0.229885, -0.229148, -0.228413, -0.227678, -0.226945, -0.226214, -0.225483, -0.224754, -0.224026, -0.223299, -0.222573, -0.221849, -0.221126, -0.220404, -0.219683, -0.218963, -0.218245, -0.217527, -0.216811, -0.216096, -0.215383, -0.21467, -0.213959, -0.213249, -0.21254, -0.211832, -0.211125, -0.210419, -0.209715, -0.209012, -0.208309, -0.207608, -0.206908, -0.20621, -0.205512, -0.204815, -0.20412, -0.203426, -0.202732, -0.20204, -0.201349, -0.200659, -0.199971, -0.199283, -0.198596, -0.197911, -0.197226, -0.196543, -0.195861, -0.195179, -0.194499, -0.19382, -0.193142, -0.192465, -0.191789, -0.191114, -0.19044, -0.189767, -0.189096, -0.188425, -0.187755, -0.187087, -0.186419, -0.185752, -0.185087, -0.184422, -0.183759, -0.183096, -0.182435, -0.181774, -0.181115, -0.180456, -0.179799, -0.179142, -0.178486, -0.177832, -0.177178, -0.176526, -0.175874, -0.175224, -0.174574, -0.173925, -0.173277, -0.172631, -0.171985, -0.17134, -0.170696, -0.170053, -0.169411, -0.16877, -0.16813, -0.167491, -0.166853, -0.166216, -0.165579, -0.164944, -0.164309, -0.163676, -0.163043, -0.162412, -0.161781, -0.161151, -0.160522, -0.159894, -0.159267, -0.158641, -0.158015, -0.157391, -0.156767, -0.156145, -0.155523, -0.154902, -0.154282, -0.153663, -0.153045, -0.152427, -0.151811, -0.151195, -0.150581, -0.149967, -0.149354, -0.148742, -0.14813, -0.14752, -0.14691, -0.146302, -0.145694, -0.145087, -0.144481, -0.143876, -0.143271, -0.142668, -0.142065, -0.141463, -0.140862, -0.140261, -0.139662, -0.139063, -0.138466, -0.137869, -0.137272, -0.136677, -0.136083, -0.135489, -0.134896, -0.134304, -0.133713, -0.133122, -0.132533, -0.131944, -0.131356, -0.130768, -0.130182, -0.129596, -0.129011, -0.128427, -0.127844, -0.127261, -0.126679, -0.126098, -0.125518, -0.124939, -0.12436, -0.123782, -0.123205, -0.122629, -0.122053, -0.121478, -0.120904, -0.120331, -0.119758, -0.119186, -0.118615, -0.118045, -0.117475, -0.116907, -0.116339, -0.115771, -0.115205, -0.114639, -0.114074, -0.113509, -0.112946, -0.112383, -0.111821, -0.111259, -0.110698, -0.110138, -0.109579, -0.10902, -0.108463, -0.107905, -0.107349, -0.106793, -0.106238, -0.105684, -0.10513, -0.104577, -0.104025, -0.103474, -0.102923, -0.102373, -0.101824, -0.101275, -0.100727, -0.100179, -0.099633, -0.099087, -0.098542, -0.097997, -0.097453, -0.09691, -0.096367, -0.095826, -0.095284, -0.094744, -0.094204, -0.093665, -0.093126, -0.092589, -0.092051, -0.091515, -0.090979, -0.090444, -0.089909, -0.089376, -0.088842, -0.08831, -0.087778, -0.087247, -0.086716, -0.086186, -0.085657, -0.085128, -0.0846, -0.084073, -0.083546, -0.08302, -0.082494, -0.08197, -0.081445, -0.080922, -0.080399, -0.079877, -0.079355, -0.078834, -0.078314, -0.077794, -0.077275, -0.076756, -0.076238, -0.075721, -0.075204, -0.074688, -0.074172, -0.073658, -0.073143, -0.07263, -0.072117, -0.071604, -0.071092, -0.070581, -0.07007, -0.06956, -0.069051, -0.068542, -0.068034, -0.067526, -0.067019, -0.066513, -0.066007, -0.065502, -0.064997, -0.064493, -0.063989, -0.063486, -0.062984, -0.062482, -0.061981, -0.06148, -0.06098, -0.060481, -0.059982, -0.059484, -0.058986, -0.058489, -0.057992, -0.057496, -0.057, -0.056505, -0.056011, -0.055517, -0.055024, -0.054531, -0.054039, -0.053548, -0.053057, -0.052566, -0.052076, -0.051587, -0.051098, -0.05061, -0.050122, -0.049635, -0.049149, -0.048662, -0.048177, -0.047692, -0.047208, -0.046724, -0.04624, -0.045757, -0.045275, -0.044793, -0.044312, -0.043832, -0.043351, -0.042872, -0.042393, -0.041914, -0.041436, -0.040959, -0.040482, -0.040005, -0.039529, -0.039054, -0.038579, -0.038105, -0.037631, -0.037157, -0.036684, -0.036212, -0.03574, -0.035269, -0.034798, -0.034328, -0.033858, -0.033389, -0.03292, -0.032452, -0.031984, -0.031517, -0.03105, -0.030584, -0.030118, -0.029653, -0.029188, -0.028724, -0.02826, -0.027797, -0.027334, -0.026872, -0.02641, -0.025949, -0.025488, -0.025028, -0.024568, -0.024109, -0.02365, -0.023192, -0.022734, -0.022276, -0.021819, -0.021363, -0.020907, -0.020452, -0.019997, -0.019542, -0.019088, -0.018634, -0.018181, -0.017729, -0.017277, -0.016825, -0.016374, -0.015923, -0.015473, -0.015023, -0.014574, -0.014125, -0.013676, -0.013228, -0.012781, -0.012334, -0.011887, -0.011441, -0.010995, -0.01055, -0.010105, -0.009661, -0.009217, -0.008774, -0.008331, -0.007889, -0.007446, -0.007005, -0.006564, -0.006123, -0.005683, -0.005243, -0.004804, -0.004365, -0.003926, -0.003488, -0.003051, -0.002614, -0.002177, -0.001741, -0.001305, -0.000869, -0.000435, 0.0};

float logarithm10(float x) {
	float result; // = log10(x)
	uint32_t exponent = 0; // log100(divider)
	float divider = 1.F; // = 100 ^ exponent

	while (x >= divider) {
		divider *= 100.F;
		exponent++;
	}

	// now (x < divider)
	// use look up table
	// log(x) = log(x*divider/divider) = log(x/divider) + log(divider)
	float lookup_f = x * 1000.F / divider;

	// exponent is log100 of divider and 2 is log10(100)
	// is needed to change the base of the logarithm of the divider
	result = log_table_10[(uint32_t)lookup_f] + exponent * 2;
	return result;
}

/*
import math
lower, upper, samples = 0, 10, 1000
m = "const float pow_table_10[" + str(samples) + "] = { "
for i in range(0, samples):
    x = i / samples * (upper - lower)
    m += str(round(math.pow(10, x), 6)) + ', '
m = m[0:len(m)-2]
m += "};"
print(m)
 */

const float pow_table_10[1000] = { 1.0, 1.023293, 1.047129, 1.071519, 1.096478, 1.122018, 1.148154, 1.174898, 1.202264, 1.230269, 1.258925, 1.28825, 1.318257, 1.348963, 1.380384, 1.412538, 1.44544, 1.479108, 1.513561, 1.548817, 1.584893, 1.62181, 1.659587, 1.698244, 1.737801, 1.778279, 1.819701, 1.862087, 1.905461, 1.949845, 1.995262, 2.041738, 2.089296, 2.137962, 2.187762, 2.238721, 2.290868, 2.344229, 2.398833, 2.454709, 2.511886, 2.570396, 2.630268, 2.691535, 2.754229, 2.818383, 2.884032, 2.951209, 3.019952, 3.090295, 3.162278, 3.235937, 3.311311, 3.388442, 3.467369, 3.548134, 3.630781, 3.715352, 3.801894, 3.890451, 3.981072, 4.073803, 4.168694, 4.265795, 4.365158, 4.466836, 4.570882, 4.677351, 4.786301, 4.897788, 5.011872, 5.128614, 5.248075, 5.370318, 5.495409, 5.623413, 5.754399, 5.888437, 6.025596, 6.16595, 6.309573, 6.456542, 6.606934, 6.76083, 6.91831, 7.079458, 7.24436, 7.413102, 7.585776, 7.762471, 7.943282, 8.128305, 8.317638, 8.51138, 8.709636, 8.912509, 9.120108, 9.332543, 9.549926, 9.772372, 10.0, 10.23293, 10.471285, 10.715193, 10.964782, 11.220185, 11.481536, 11.748976, 12.022644, 12.302688, 12.589254, 12.882496, 13.182567, 13.489629, 13.803843, 14.125375, 14.454398, 14.791084, 15.135612, 15.488166, 15.848932, 16.218101, 16.595869, 16.982437, 17.378008, 17.782794, 18.197009, 18.620871, 19.054607, 19.498446, 19.952623, 20.417379, 20.892961, 21.379621, 21.877616, 22.387211, 22.908677, 23.442288, 23.988329, 24.547089, 25.118864, 25.703958, 26.30268, 26.915348, 27.542287, 28.183829, 28.840315, 29.512092, 30.199517, 30.902954, 31.622777, 32.359366, 33.113112, 33.884416, 34.673685, 35.481339, 36.307805, 37.153523, 38.01894, 38.904514, 39.810717, 40.738028, 41.686938, 42.657952, 43.651583, 44.668359, 45.708819, 46.773514, 47.863009, 48.977882, 50.118723, 51.286138, 52.480746, 53.70318, 54.954087, 56.234133, 57.543994, 58.884366, 60.255959, 61.6595, 63.095734, 64.565423, 66.069345, 67.608298, 69.183097, 70.794578, 72.443596, 74.131024, 75.857758, 77.624712, 79.432823, 81.283052, 83.176377, 85.113804, 87.096359, 89.125094, 91.201084, 93.32543, 95.499259, 97.723722, 100.0, 102.329299, 104.712855, 107.151931, 109.64782, 112.201845, 114.815362, 117.489755, 120.226443, 123.026877, 125.892541, 128.824955, 131.825674, 134.896288, 138.038426, 141.253754, 144.543977, 147.910839, 151.356125, 154.881662, 158.489319, 162.18101, 165.958691, 169.824365, 173.780083, 177.827941, 181.970086, 186.208714, 190.546072, 194.98446, 199.526231, 204.173794, 208.929613, 213.796209, 218.776162, 223.872114, 229.086765, 234.422882, 239.883292, 245.470892, 251.188643, 257.039578, 263.026799, 269.15348, 275.42287, 281.838293, 288.40315, 295.120923, 301.995172, 309.029543, 316.227766, 323.593657, 331.131121, 338.844156, 346.73685, 354.813389, 363.078055, 371.535229, 380.189396, 389.045145, 398.107171, 407.380278, 416.869383, 426.579519, 436.515832, 446.683592, 457.08819, 467.735141, 478.630092, 489.778819, 501.187234, 512.861384, 524.80746, 537.031796, 549.540874, 562.341325, 575.439937, 588.843655, 602.559586, 616.595002, 630.957344, 645.654229, 660.693448, 676.082975, 691.830971, 707.945784, 724.43596, 741.310241, 758.577575, 776.247117, 794.328235, 812.830516, 831.763771, 851.138038, 870.96359, 891.250938, 912.010839, 933.254301, 954.992586, 977.237221, 1000.0, 1023.292992, 1047.128548, 1071.519305, 1096.478196, 1122.018454, 1148.153621, 1174.897555, 1202.264435, 1230.268771, 1258.925412, 1288.249552, 1318.256739, 1348.962883, 1380.384265, 1412.537545, 1445.439771, 1479.108388, 1513.561248, 1548.816619, 1584.893192, 1621.810097, 1659.586907, 1698.243652, 1737.800829, 1778.27941, 1819.700859, 1862.087137, 1905.460718, 1949.8446, 1995.262315, 2041.737945, 2089.296131, 2137.96209, 2187.761624, 2238.721139, 2290.867653, 2344.228815, 2398.832919, 2454.708916, 2511.886432, 2570.395783, 2630.267992, 2691.534804, 2754.228703, 2818.382931, 2884.031503, 2951.209227, 3019.95172, 3090.295433, 3162.27766, 3235.936569, 3311.311215, 3388.441561, 3467.368505, 3548.133892, 3630.780548, 3715.352291, 3801.893963, 3890.45145, 3981.071706, 4073.802778, 4168.693835, 4265.795188, 4365.158322, 4466.835922, 4570.881896, 4677.351413, 4786.300923, 4897.788194, 5011.872336, 5128.61384, 5248.074602, 5370.317964, 5495.408739, 5623.413252, 5754.399373, 5888.436554, 6025.595861, 6165.950019, 6309.573445, 6456.54229, 6606.93448, 6760.829754, 6918.309709, 7079.457844, 7244.359601, 7413.102413, 7585.77575, 7762.471166, 7943.282347, 8128.305162, 8317.637711, 8511.380382, 8709.6359, 8912.509381, 9120.108394, 9332.543008, 9549.92586, 9772.37221, 10000.0, 10232.929923, 10471.285481, 10715.193052, 10964.781961, 11220.184543, 11481.536215, 11748.975549, 12022.644346, 12302.687708, 12589.254118, 12882.495517, 13182.567386, 13489.628826, 13803.842646, 14125.375446, 14454.397707, 14791.083882, 15135.612484, 15488.166189, 15848.931925, 16218.100974, 16595.869074, 16982.436525, 17378.008287, 17782.7941, 18197.008586, 18620.871367, 19054.60718, 19498.445998, 19952.62315, 20417.379447, 20892.961309, 21379.620895, 21877.616239, 22387.211386, 22908.676528, 23442.288153, 23988.32919, 24547.089157, 25118.864315, 25703.957828, 26302.679919, 26915.348039, 27542.287033, 28183.829313, 28840.315031, 29512.092267, 30199.517204, 30902.954325, 31622.776602, 32359.365693, 33113.112148, 33884.415614, 34673.685045, 35481.338923, 36307.805477, 37153.52291, 38018.939632, 38904.514499, 39810.717055, 40738.02778, 41686.938347, 42657.95188, 43651.583224, 44668.359215, 45708.818961, 46773.514129, 47863.009232, 48977.881937, 50118.723363, 51286.138399, 52480.746025, 53703.179637, 54954.087386, 56234.132519, 57543.993734, 58884.365536, 60255.958607, 61659.500186, 63095.734448, 64565.422903, 66069.344801, 67608.297539, 69183.097092, 70794.578438, 72443.596007, 74131.02413, 75857.757503, 77624.711663, 79432.823472, 81283.051616, 83176.37711, 85113.80382, 87096.358996, 89125.093813, 91201.083936, 93325.43008, 95499.258602, 97723.722096, 100000.0, 102329.299228, 104712.854805, 107151.930524, 109647.819614, 112201.84543, 114815.36215, 117489.755494, 120226.443462, 123026.877081, 125892.541179, 128824.955169, 131825.673856, 134896.288259, 138038.42646, 141253.754462, 144543.977075, 147910.838817, 151356.124844, 154881.661891, 158489.319246, 162181.009736, 165958.690744, 169824.365246, 173780.082875, 177827.941004, 181970.085861, 186208.713666, 190546.071796, 194984.459976, 199526.231497, 204173.794467, 208929.613085, 213796.20895, 218776.162395, 223872.113857, 229086.765277, 234422.881532, 239883.291902, 245470.891569, 251188.643151, 257039.578277, 263026.79919, 269153.480393, 275422.870334, 281838.293126, 288403.150313, 295120.922667, 301995.17204, 309029.543251, 316227.766017, 323593.65693, 331131.121483, 338844.156139, 346736.850453, 354813.389234, 363078.05477, 371535.229097, 380189.396321, 389045.144994, 398107.170553, 407380.277804, 416869.38347, 426579.518802, 436515.83224, 446683.592151, 457088.189615, 467735.141287, 478630.092323, 489778.819368, 501187.233627, 512861.383991, 524807.46025, 537031.79637, 549540.873858, 562341.32519, 575439.937337, 588843.655356, 602559.586074, 616595.001861, 630957.34448, 645654.229035, 660693.448008, 676082.975392, 691830.970919, 707945.784384, 724435.960075, 741310.241301, 758577.575029, 776247.116629, 794328.234724, 812830.516164, 831763.771103, 851138.038202, 870963.589956, 891250.938134, 912010.839356, 933254.300797, 954992.586021, 977237.220956, 1000000.0, 1023292.992281, 1047128.548051, 1071519.305238, 1096478.196143, 1122018.454302, 1148153.621497, 1174897.55494, 1202264.434617, 1230268.770812, 1258925.411794, 1288249.551693, 1318256.738556, 1348962.882592, 1380384.264603, 1412537.544623, 1445439.770746, 1479108.388168, 1513561.248436, 1548816.618912, 1584893.192461, 1621810.097359, 1659586.907438, 1698243.652462, 1737800.828749, 1778279.410039, 1819700.85861, 1862087.136663, 1905460.717963, 1949844.599758, 1995262.314969, 2041737.94467, 2089296.130854, 2137962.089502, 2187761.62395, 2238721.138568, 2290867.652768, 2344228.81532, 2398832.919019, 2454708.915685, 2511886.43151, 2570395.782769, 2630267.991895, 2691534.803927, 2754228.703338, 2818382.931264, 2884031.503127, 2951209.226666, 3019951.720402, 3090295.432514, 3162277.660168, 3235936.569296, 3311311.214826, 3388441.561392, 3467368.504525, 3548133.892336, 3630780.547701, 3715352.290972, 3801893.963206, 3890451.449943, 3981071.705535, 4073802.778041, 4168693.834703, 4265795.188016, 4365158.322402, 4466835.92151, 4570881.896149, 4677351.412872, 4786300.923226, 4897788.193684, 5011872.336273, 5128613.839914, 5248074.602498, 5370317.963703, 5495408.738576, 5623413.251903, 5754399.373372, 5888436.553556, 6025595.860744, 6165950.018615, 6309573.444802, 6456542.290347, 6606934.480076, 6760829.75392, 6918309.709189, 7079457.843841, 7244359.60075, 7413102.413009, 7585775.750292, 7762471.166287, 7943282.347243, 8128305.161641, 8317637.711027, 8511380.382024, 8709635.899561, 8912509.381337, 9120108.393559, 9332543.00797, 9549925.860214, 9772372.209558, 10000000.0, 10232929.922808, 10471285.480509, 10715193.052376, 10964781.961432, 11220184.54302, 11481536.214969, 11748975.549395, 12022644.346174, 12302687.708124, 12589254.117942, 12882495.516931, 13182567.385564, 13489628.825917, 13803842.646029, 14125375.446228, 14454397.707459, 14791083.881682, 15135612.484362, 15488166.189125, 15848931.924611, 16218100.973589, 16595869.074376, 16982436.524617, 17378008.287494, 17782794.100389, 18197008.5861, 18620871.366629, 19054607.179632, 19498445.99758, 19952623.149689, 20417379.446695, 20892961.30854, 21379620.895022, 21877616.239496, 22387211.385683, 22908676.527678, 23442288.153199, 23988329.190195, 24547089.15685, 25118864.315096, 25703957.827689, 26302679.918954, 26915348.039269, 27542287.033382, 28183829.312645, 28840315.031266, 29512092.266664, 30199517.20402, 30902954.325136, 31622776.601684, 32359365.692963, 33113112.148259, 33884415.61392, 34673685.045253, 35481338.923358, 36307805.47701, 37153522.909717, 38018939.632056, 38904514.499428, 39810717.05535, 40738027.780411, 41686938.347034, 42657951.880159, 43651583.224017, 44668359.215096, 45708818.961488, 46773514.12872, 47863009.232264, 48977881.936845, 50118723.362727, 51286138.399136, 52480746.024977, 53703179.637025, 54954087.385762, 56234132.519035, 57543993.733716, 58884365.535559, 60255958.607436, 61659500.186148, 63095734.448019, 64565422.903466, 66069344.80076, 67608297.539198, 69183097.091894, 70794578.438414, 72443596.007499, 74131024.130092, 75857757.502919, 77624711.662869, 79432823.472428, 81283051.61641, 83176377.110267, 85113803.820238, 87096358.995608, 89125093.813375, 91201083.935591, 93325430.079699, 95499258.602144, 97723722.095581, 100000000.0, 102329299.228075, 104712854.80509, 107151930.523761, 109647819.614319, 112201845.430197, 114815362.149688, 117489755.493953, 120226443.461741, 123026877.081238, 125892541.179417, 128824955.169314, 131825673.855641, 134896288.259165, 138038426.460288, 141253754.462275, 144543977.074593, 147910838.816821, 151356124.843621, 154881661.891248, 158489319.246111, 162181009.735893, 165958690.743756, 169824365.246175, 173780082.874938, 177827941.003892, 181970085.860998, 186208713.666287, 190546071.796324, 194984459.975804, 199526231.496887, 204173794.466952, 208929613.085404, 213796208.950223, 218776162.394955, 223872113.856834, 229086765.276777, 234422881.531992, 239883291.901949, 245470891.568503, 251188643.150958, 257039578.276886, 263026799.189538, 269153480.392691, 275422870.333816, 281838293.126445, 288403150.31266, 295120922.666638, 301995172.040202, 309029543.251359, 316227766.016838, 323593656.929628, 331131121.482591, 338844156.139202, 346736850.452531, 354813389.233576, 363078054.770102, 371535229.097173, 380189396.320561, 389045144.99428, 398107170.553497, 407380277.804112, 416869383.470335, 426579518.801592, 436515832.240167, 446683592.150963, 457088189.614875, 467735141.287198, 478630092.322638, 489778819.368446, 501187233.627271, 512861383.991366, 524807460.249773, 537031796.370253, 549540873.857625, 562341325.190349, 575439937.337157, 588843655.355588, 602559586.074357, 616595001.861481, 630957344.480194, 645654229.034656, 660693448.007596, 676082975.391982, 691830970.918936, 707945784.384137, 724435960.074989, 741310241.300919, 758577575.029185, 776247116.628693, 794328234.724282, 812830516.164099, 831763771.102671, 851138038.202376, 870963589.95608, 891250938.133744, 912010839.355911, 933254300.796992, 954992586.021437, 977237220.955811, 1000000000.0, 1023292992.280754, 1047128548.050899, 1071519305.237609, 1096478196.143187, 1122018454.301965, 1148153621.496884, 1174897554.93953, 1202264434.617413, 1230268770.812381, 1258925411.794166, 1288249551.693132, 1318256738.55641, 1348962882.591656, 1380384264.602887, 1412537544.622756, 1445439770.745928, 1479108388.168207, 1513561248.436207, 1548816618.912486, 1584893192.461117, 1621810097.358933, 1659586907.437563, 1698243652.461746, 1737800828.749376, 1778279410.038923, 1819700858.609982, 1862087136.662866, 1905460717.963252, 1949844599.758049, 1995262314.968883, 2041737944.669532, 2089296130.854041, 2137962089.502233, 2187761623.949552, 2238721138.568347, 2290867652.767779, 2344228815.319928, 2398832919.019485, 2454708915.685023, 2511886431.509572, 2570395782.768865, 2630267991.895381, 2691534803.926914, 2754228703.338163, 2818382931.264449, 2884031503.1266, 2951209226.666378, 3019951720.402019, 3090295432.513592, 3162277660.168379, 3235936569.296281, 3311311214.825908, 3388441561.392021, 3467368504.52531, 3548133892.335746, 3630780547.701003, 3715352290.971728, 3801893963.205613, 3890451449.942805, 3981071705.534969, 4073802778.041122, 4168693834.703347, 4265795188.015917, 4365158322.401666, 4466835921.509635, 4570881896.148752, 4677351412.871982, 4786300923.22638, 4897788193.684457, 5011872336.272715, 5128613839.913638, 5248074602.497712, 5370317963.702533, 5495408738.576248, 5623413251.903491, 5754399373.371567, 5888436553.555884, 6025595860.743568, 6165950018.61481, 6309573444.801943, 6456542290.346562, 6606934480.075964, 6760829753.919819, 6918309709.189363, 7079457843.841373, 7244359600.749891, 7413102413.009162, 7585775750.291821, 7762471166.286927, 7943282347.242822, 8128305161.640995, 8317637711.026709, 8511380382.023759, 8709635899.560797, 8912509381.33744, 9120108393.559114, 9332543007.969925, 9549925860.214369, 9772372209.558111};
const float pow_multipliers[10] = {1.0, 10.0, 100.0, 1000.0, 10000.0, 100000.0, 1000000.0, 10000000.0, 100000000.0, 1000000000.0};

float power10(float x) {
	float result;
	// 10^x = 10^(a+b)
	// b tra [0-10), a rimanente
	float b = fmodf(x, 10);
	float a = x - b;

	uint32_t multiplier = a / 10.F;

	float lookup_f = b * 100.F;

	result = pow_table_10[(uint32_t)lookup_f] * pow_multipliers[multiplier];

	return result;
}

float logarithmE(float x) {
	return logarithm10(x) * 2.302585093F; // ... * log_e(10)
}

float logarithm2(float x) {
	return logarithm10(x) * 3.321928095F; // ... * log_2(10)
}

float logarithm12(float x) {
	return logarithm10(x) * 0.9226284080F; // ... * log_12(10)
}

// 512 samples of half period of a sine-wave
const float sin_table[512] = { 0.000000F, 0.006136F, 0.012272F, 0.018407F, 0.024541F, 0.030675F, 0.036807F, 0.042938F, 0.049068F, 0.055195F, 0.061321F, 0.067444F, 0.073565F, 0.079682F, 0.085797F, 0.091909F, 0.098017F, 0.104122F, 0.110222F, 0.116319F, 0.122411F, 0.128498F, 0.134581F, 0.140658F, 0.146730F, 0.152797F, 0.158858F, 0.164913F, 0.170962F, 0.177004F, 0.183040F, 0.189069F, 0.195090F, 0.201105F, 0.207111F, 0.213110F, 0.219101F, 0.225084F, 0.231058F, 0.237024F, 0.242980F, 0.248928F, 0.254866F, 0.260794F, 0.266713F, 0.272621F, 0.278520F, 0.284408F, 0.290285F, 0.296151F, 0.302006F, 0.307850F, 0.313682F, 0.319502F, 0.325310F, 0.331106F, 0.336890F, 0.342661F, 0.348419F, 0.354164F, 0.359895F, 0.365613F, 0.371317F, 0.377007F, 0.382683F, 0.388345F, 0.393992F, 0.399624F, 0.405241F, 0.410843F, 0.416430F, 0.422000F, 0.427555F, 0.433094F, 0.438616F, 0.444122F, 0.449611F, 0.455084F, 0.460539F, 0.465976F, 0.471397F, 0.476799F, 0.482184F, 0.487550F, 0.492898F, 0.498228F, 0.503538F, 0.508830F, 0.514103F, 0.519356F, 0.524590F, 0.529804F, 0.534998F, 0.540171F, 0.545325F, 0.550458F, 0.555570F, 0.560662F, 0.565732F, 0.570781F, 0.575808F, 0.580814F, 0.585798F, 0.590760F, 0.595699F, 0.600616F, 0.605511F, 0.610383F, 0.615232F, 0.620057F, 0.624859F, 0.629638F, 0.634393F, 0.639124F, 0.643832F, 0.648514F, 0.653173F, 0.657807F, 0.662416F, 0.667000F, 0.671559F, 0.676093F, 0.680601F, 0.685084F, 0.689541F, 0.693971F, 0.698376F, 0.702755F, 0.707107F, 0.711432F, 0.715731F, 0.720003F, 0.724247F, 0.728464F, 0.732654F, 0.736817F, 0.740951F, 0.745058F, 0.749136F, 0.753187F, 0.757209F, 0.761202F, 0.765167F, 0.769103F, 0.773010F, 0.776888F, 0.780737F, 0.784557F, 0.788346F, 0.792107F, 0.795837F, 0.799537F, 0.803208F, 0.806848F, 0.810457F, 0.814036F, 0.817585F, 0.821103F, 0.824589F, 0.828045F, 0.831470F, 0.834863F, 0.838225F, 0.841555F, 0.844854F, 0.848120F, 0.851355F, 0.854558F, 0.857729F, 0.860867F, 0.863973F, 0.867046F, 0.870087F, 0.873095F, 0.876070F, 0.879012F, 0.881921F, 0.884797F, 0.887640F, 0.890449F, 0.893224F, 0.895966F, 0.898674F, 0.901349F, 0.903989F, 0.906596F, 0.909168F, 0.911706F, 0.914210F, 0.916679F, 0.919114F, 0.921514F, 0.923880F, 0.926210F, 0.928506F, 0.930767F, 0.932993F, 0.935184F, 0.937339F, 0.939459F, 0.941544F, 0.943593F, 0.945607F, 0.947586F, 0.949528F, 0.951435F, 0.953306F, 0.955141F, 0.956940F, 0.958703F, 0.960431F, 0.962121F, 0.963776F, 0.965394F, 0.966976F, 0.968522F, 0.970031F, 0.971504F, 0.972940F, 0.974339F, 0.975702F, 0.977028F, 0.978317F, 0.979570F, 0.980785F, 0.981964F, 0.983105F, 0.984210F, 0.985278F, 0.986308F, 0.987301F, 0.988258F, 0.989177F, 0.990058F, 0.990903F, 0.991710F, 0.992480F, 0.993212F, 0.993907F, 0.994565F, 0.995185F, 0.995767F, 0.996313F, 0.996820F, 0.997290F, 0.997723F, 0.998118F, 0.998476F, 0.998795F, 0.999078F, 0.999322F, 0.999529F, 0.999699F, 0.999831F, 0.999925F, 0.999981F, 1.000000F, 0.999981F, 0.999925F, 0.999831F, 0.999699F, 0.999529F, 0.999322F, 0.999078F, 0.998795F, 0.998476F, 0.998118F, 0.997723F, 0.997290F, 0.996820F, 0.996313F, 0.995767F, 0.995185F, 0.994565F, 0.993907F, 0.993212F, 0.992480F, 0.991710F, 0.990903F, 0.990058F, 0.989177F, 0.988258F, 0.987301F, 0.986308F, 0.985278F, 0.984210F, 0.983105F, 0.981964F, 0.980785F, 0.979570F, 0.978317F, 0.977028F, 0.975702F, 0.974339F, 0.972940F, 0.971504F, 0.970031F, 0.968522F, 0.966976F, 0.965394F, 0.963776F, 0.962121F, 0.960431F, 0.958703F, 0.956940F, 0.955141F, 0.953306F, 0.951435F, 0.949528F, 0.947586F, 0.945607F, 0.943593F, 0.941544F, 0.939459F, 0.937339F, 0.935184F, 0.932993F, 0.930767F, 0.928506F, 0.926210F, 0.923880F, 0.921514F, 0.919114F, 0.916679F, 0.914210F, 0.911706F, 0.909168F, 0.906596F, 0.903989F, 0.901349F, 0.898674F, 0.895966F, 0.893224F, 0.890449F, 0.887640F, 0.884797F, 0.881921F, 0.879012F, 0.876070F, 0.873095F, 0.870087F, 0.867046F, 0.863973F, 0.860867F, 0.857729F, 0.854558F, 0.851355F, 0.848120F, 0.844854F, 0.841555F, 0.838225F, 0.834863F, 0.831470F, 0.828045F, 0.824589F, 0.821103F, 0.817585F, 0.814036F, 0.810457F, 0.806848F, 0.803208F, 0.799537F, 0.795837F, 0.792107F, 0.788346F, 0.784557F, 0.780737F, 0.776888F, 0.773010F, 0.769103F, 0.765167F, 0.761202F, 0.757209F, 0.753187F, 0.749136F, 0.745058F, 0.740951F, 0.736817F, 0.732654F, 0.728464F, 0.724247F, 0.720003F, 0.715731F, 0.711432F, 0.707107F, 0.702755F, 0.698376F, 0.693971F, 0.689541F, 0.685084F, 0.680601F, 0.676093F, 0.671559F, 0.667000F, 0.662416F, 0.657807F, 0.653173F, 0.648514F, 0.643832F, 0.639124F, 0.634393F, 0.629638F, 0.624859F, 0.620057F, 0.615232F, 0.610383F, 0.605511F, 0.600616F, 0.595699F, 0.590760F, 0.585798F, 0.580814F, 0.575808F, 0.570781F, 0.565732F, 0.560662F, 0.555570F, 0.550458F, 0.545325F, 0.540171F, 0.534998F, 0.529804F, 0.524590F, 0.519356F, 0.514103F, 0.508830F, 0.503538F, 0.498228F, 0.492898F, 0.487550F, 0.482184F, 0.476799F, 0.471397F, 0.465976F, 0.460539F, 0.455084F, 0.449611F, 0.444122F, 0.438616F, 0.433094F, 0.427555F, 0.422000F, 0.416430F, 0.410843F, 0.405241F, 0.399624F, 0.393992F, 0.388345F, 0.382683F, 0.377007F, 0.371317F, 0.365613F, 0.359895F, 0.354164F, 0.348419F, 0.342661F, 0.336890F, 0.331106F, 0.325310F, 0.319502F, 0.313682F, 0.307850F, 0.302006F, 0.296151F, 0.290285F, 0.284408F, 0.278520F, 0.272621F, 0.266713F, 0.260794F, 0.254866F, 0.248928F, 0.242980F, 0.237024F, 0.231058F, 0.225084F, 0.219101F, 0.213110F, 0.207111F, 0.201105F, 0.195090F, 0.189069F, 0.183040F, 0.177004F, 0.170962F, 0.164913F, 0.158858F, 0.152797F, 0.146730F, 0.140658F, 0.134581F, 0.128498F, 0.122411F, 0.116319F, 0.110222F, 0.104122F, 0.098017F, 0.091909F, 0.085797F, 0.079682F, 0.073565F, 0.067444F, 0.061321F, 0.055195F, 0.049068F, 0.042938F, 0.036807F, 0.030675F, 0.024541F, 0.018407F, 0.012272F, 0.006136F };

/* HOW TO GENERATE THE TABLE
#define M_TWOPI 6.283185307179586476925286766559
printf("const float sin_table[512] = { ");
for (int i = 0; i < 512; i++) printf("%fF, ", sin(M_TWOPI * i / 1024));
printf("}");
 */

float wave_gen(uint32_t i, float tone) {

    //float period_f = 48000.F / tone;
    //uint32_t period_i = period_f;
    //uint32_t table_index = (i * 1024 / period_i) % 1024;

	float result = 0;

	float mid = ((float)i * 1024.F * tone / 48000.F);

	uint32_t table_index = (uint32_t)mid % 1024;

	if (table_index < 512) {
		result = sin_table[table_index];
	} else {
		result = -sin_table[table_index - 512];
	}

    return result;
}

/* USER CODE END 0 */

/**
  * @brief  The application entry point.
  * @retval int
  */
int main(void)
{
  /* USER CODE BEGIN 1 */

  /* USER CODE END 1 */

  /* MCU Configuration--------------------------------------------------------*/

  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
  HAL_Init();

  /* USER CODE BEGIN Init */

  /* USER CODE END Init */

  /* Configure the system clock */
  SystemClock_Config();

  /* USER CODE BEGIN SysInit */

  /* USER CODE END SysInit */

  /* Initialize all configured peripherals */
  MX_GPIO_Init();
  /* USER CODE BEGIN 2 */

  /* USER CODE END 2 */

  /* Infinite loop */
  /* USER CODE BEGIN WHILE */
  while (1)
  {



    /* USER CODE END WHILE */

    /* USER CODE BEGIN 3 */

	  while(1) {
		  c = logarithm10(a);
		  b = power10(a);
		  //c = wave_gen((uint32_t)a, 440);
		  //b = arm_sin_f32((uint32_t)(a / (2.0 * PI) * 48000.0));
	  }


	  HAL_GPIO_WritePin(LED_G_GPIO_Port, LED_G_Pin, GPIO_PIN_RESET);

	  for(uint32_t i = 0; i < TEST_SETS; i++) {
		  start_time[i] = HAL_GetTick();
		  for(uint32_t j = 0; j < TEST_REPETITIONS; j++) {
			  //c = sinf(a); // sinf, tanf, log10f, sqrtf, powf
			  //c = arm_sin_f32(j);
			  //arm_vlog_f32(&a, &b, 1);
			  //c = wave_gen(i, 440);
			  c = powf(10, a);
		  }
		  end_time[i] = HAL_GetTick();
		  elapsed[i] = end_time[i] - start_time[i];
	  }

	  HAL_GPIO_WritePin(LED_G_GPIO_Port, LED_G_Pin, GPIO_PIN_SET);

	  HAL_Delay(500);
  }
  /* USER CODE END 3 */
}

/**
  * @brief System Clock Configuration
  * @retval None
  */
void SystemClock_Config(void)
{
  RCC_OscInitTypeDef RCC_OscInitStruct = {0};
  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};

  /** Configure the main internal regulator output voltage
  */
  __HAL_RCC_PWR_CLK_ENABLE();
  __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);

  /** Initializes the RCC Oscillators according to the specified parameters
  * in the RCC_OscInitTypeDef structure.
  */
  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI;
  RCC_OscInitStruct.HSIState = RCC_HSI_ON;
  RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;
  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;
  RCC_OscInitStruct.PLL.PLLM = 8;
  RCC_OscInitStruct.PLL.PLLN = 168;
  RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
  RCC_OscInitStruct.PLL.PLLQ = 4;
  if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
  {
    Error_Handler();
  }

  /** Initializes the CPU, AHB and APB buses clocks
  */
  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV4;
  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV2;

  if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_5) != HAL_OK)
  {
    Error_Handler();
  }
}

/**
  * @brief GPIO Initialization Function
  * @param None
  * @retval None
  */
static void MX_GPIO_Init(void)
{
  GPIO_InitTypeDef GPIO_InitStruct = {0};

  /* GPIO Ports Clock Enable */
  __HAL_RCC_GPIOD_CLK_ENABLE();

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(GPIOD, LED_B_Pin|LED_R_Pin|LED_O_Pin|LED_G_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pins : LED_B_Pin LED_R_Pin LED_O_Pin LED_G_Pin */
  GPIO_InitStruct.Pin = LED_B_Pin|LED_R_Pin|LED_O_Pin|LED_G_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(GPIOD, &GPIO_InitStruct);

}

/* USER CODE BEGIN 4 */

/* USER CODE END 4 */

/**
  * @brief  This function is executed in case of error occurrence.
  * @retval None
  */
void Error_Handler(void)
{
  /* USER CODE BEGIN Error_Handler_Debug */
  /* User can add his own implementation to report the HAL error return state */
  __disable_irq();
  while (1)
  {
  }
  /* USER CODE END Error_Handler_Debug */
}

#ifdef  USE_FULL_ASSERT
/**
  * @brief  Reports the name of the source file and the source line number
  *         where the assert_param error has occurred.
  * @param  file: pointer to the source file name
  * @param  line: assert_param error line source number
  * @retval None
  */
void assert_failed(uint8_t *file, uint32_t line)
{
  /* USER CODE BEGIN 6 */
  /* User can add his own implementation to report the file name and line number,
     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */
  /* USER CODE END 6 */
}
#endif /* USE_FULL_ASSERT */
